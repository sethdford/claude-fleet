# ╔═══════════════════════════════════════════════════════════════════════════╗
# ║                        CLAUDE FLEET TMUX THEME                             ║
# ║                     Premium Developer Configuration                         ║
# ║                                                                             ║
# ║  A modern, gradient-styled tmux configuration designed for developers      ║
# ║  working with Claude Fleet and multi-agent workflows.                      ║
# ║                                                                             ║
# ║  Install: cp config/tmux.conf ~/.tmux.conf && tmux source ~/.tmux.conf     ║
# ║  GitHub:  https://github.com/sethdford/claude-fleet                        ║
# ╚═══════════════════════════════════════════════════════════════════════════╝

# ═══════════════════════════════════════════════════════════════════════════
# GENERAL SETTINGS
# ═══════════════════════════════════════════════════════════════════════════

# Enable true color support (requires terminal with RGB support)
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Enable mouse support for pane selection, resizing, and scrolling
set -g mouse on

# Start windows and panes at 1, not 0 (easier keyboard access)
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer (50k lines)
set -g history-limit 50000

# Reduce escape time for faster response (better for vim/neovim)
set -sg escape-time 0

# Enable focus events for vim autoread
set -g focus-events on

# Activity monitoring (visual bell instead of sound)
setw -g monitor-activity on
set -g visual-activity off

# ═══════════════════════════════════════════════════════════════════════════
# COLOR PALETTE - Claude Fleet Gradient Theme
# ═══════════════════════════════════════════════════════════════════════════
#
#   Background:  #12121a (dark blue-black)
#   Accent 1:    #00d4ff (cyan)       - Primary accent, active elements
#   Accent 2:    #0066ff (blue)       - Secondary accent, links
#   Accent 3:    #7c3aed (purple)     - Tertiary accent, highlights
#   Success:     #00ff94 (green)      - Success states
#   Warning:     #fbbf24 (yellow)     - Warning states
#   Error:       #ef4444 (red)        - Error states
#   Text:        #e4e4e7 (light gray) - Primary text
#   Muted:       #71717a (gray)       - Secondary text
#
# ═══════════════════════════════════════════════════════════════════════════

# ═══════════════════════════════════════════════════════════════════════════
# STATUS BAR CONFIGURATION
# ═══════════════════════════════════════════════════════════════════════════

# Status bar position and refresh interval
set -g status-position bottom
set -g status-interval 1
set -g status-justify left

# Status bar base colors
set -g status-style "bg=#12121a,fg=#e4e4e7"

# Status bar segment lengths
set -g status-left-length 100
set -g status-right-length 150

# ─────────────────────────────────────────────────────────────────────────────
# LEFT STATUS: Session name with cyan/blue gradient
# ─────────────────────────────────────────────────────────────────────────────
# Format: [ SESSION ] [ PREFIX INDICATOR ]
# - Session name on cyan background
# - Lambda (λ) or keyboard (⌨) icon on blue background when prefix is active
set -g status-left "#[fg=#12121a,bg=#00d4ff,bold]  #S #[fg=#00d4ff,bg=#0066ff]#[fg=#12121a,bg=#0066ff,bold] #{?client_prefix,⌨ ,λ }#[fg=#0066ff,bg=#12121a] "

# ─────────────────────────────────────────────────────────────────────────────
# WINDOW STATUS: Clean tab-style indicators
# ─────────────────────────────────────────────────────────────────────────────
# Inactive windows: gray text on dark background
# Active window: dark text on cyan background (highlighted)

setw -g window-status-separator " "
setw -g window-status-format "#[fg=#71717a,bg=#252538] #I:#W #[fg=#252538,bg=#12121a]"
setw -g window-status-current-format "#[fg=#12121a,bg=#00d4ff,bold] #I:#W #[fg=#00d4ff,bg=#12121a]"

# ─────────────────────────────────────────────────────────────────────────────
# RIGHT STATUS: System info with purple/blue/cyan gradient
# ─────────────────────────────────────────────────────────────────────────────
# Format: [ user@host ] [ TIME ] [ DATE ] [ DAY ]
# Gradient flows: gray → purple → blue → cyan
set -g status-right "#[fg=#71717a,bg=#252538] #(whoami)@#h #[fg=#12121a,bg=#7c3aed,bold]  %H:%M #[fg=#e4e4e7,bg=#0066ff,bold]  %b %d #[fg=#12121a,bg=#00d4ff,bold]  %a "

# ═══════════════════════════════════════════════════════════════════════════
# PANE STYLING
# ═══════════════════════════════════════════════════════════════════════════

# Pane border colors
set -g pane-border-style "fg=#252538"
set -g pane-active-border-style "fg=#00d4ff"

# Pane number display colors
set -g display-panes-colour "#252538"
set -g display-panes-active-colour "#00d4ff"

# ═══════════════════════════════════════════════════════════════════════════
# MESSAGE & MODE STYLING
# ═══════════════════════════════════════════════════════════════════════════

# Command prompt and messages
set -g message-style "bg=#00d4ff,fg=#12121a,bold"
set -g message-command-style "bg=#7c3aed,fg=#e4e4e7,bold"

# Copy mode highlighting
setw -g mode-style "bg=#0066ff,fg=#e4e4e7,bold"

# Clock display
setw -g clock-mode-colour "#00d4ff"
setw -g clock-mode-style 24

# ═══════════════════════════════════════════════════════════════════════════
# KEY BINDINGS
# ═══════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# PREFIX KEY: Change from Ctrl-b to Ctrl-a (easier to reach)
# ─────────────────────────────────────────────────────────────────────────────
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ─────────────────────────────────────────────────────────────────────────────
# CONFIG MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
# Reload config: prefix + r
bind r source-file ~/.tmux.conf \; display-message "  Config reloaded!"

# ─────────────────────────────────────────────────────────────────────────────
# PANE SPLITTING: Use | and - (more intuitive)
# ─────────────────────────────────────────────────────────────────────────────
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# ─────────────────────────────────────────────────────────────────────────────
# PANE NAVIGATION: Vim-style hjkl
# ─────────────────────────────────────────────────────────────────────────────
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ─────────────────────────────────────────────────────────────────────────────
# PANE RESIZING: Shift + vim keys (repeatable)
# ─────────────────────────────────────────────────────────────────────────────
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# ─────────────────────────────────────────────────────────────────────────────
# WINDOW NAVIGATION
# ─────────────────────────────────────────────────────────────────────────────
bind -r C-h select-window -t :-
bind -r C-l select-window -t :+
bind c new-window -c "#{pane_current_path}"

# ─────────────────────────────────────────────────────────────────────────────
# PANE/WINDOW MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
bind x kill-pane
bind X kill-window
bind S setw synchronize-panes \; display-message "  Sync #{?synchronize-panes,ON,OFF}"

# ─────────────────────────────────────────────────────────────────────────────
# COPY MODE: Vi-style keybindings
# ─────────────────────────────────────────────────────────────────────────────
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind -T copy-mode-vi r send-keys -X rectangle-toggle
bind p paste-buffer

# ─────────────────────────────────────────────────────────────────────────────
# SESSION MANAGEMENT
# ─────────────────────────────────────────────────────────────────────────────
bind s choose-tree -sZ -O name
bind N new-session

# ═══════════════════════════════════════════════════════════════════════════
# SMART PANE SWITCHING (vim-tmux-navigator compatible)
# ═══════════════════════════════════════════════════════════════════════════
# Allows seamless navigation between vim splits and tmux panes using Ctrl+hjkl

is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|l?n?vim?x?|fzf)(diff)?$'"
bind -n 'C-h' if-shell "$is_vim" 'send-keys C-h'  'select-pane -L'
bind -n 'C-j' if-shell "$is_vim" 'send-keys C-j'  'select-pane -D'
bind -n 'C-k' if-shell "$is_vim" 'send-keys C-k'  'select-pane -U'
bind -n 'C-l' if-shell "$is_vim" 'send-keys C-l'  'select-pane -R'

# ═══════════════════════════════════════════════════════════════════════════
# PLUGINS (Optional - requires TPM)
# ═══════════════════════════════════════════════════════════════════════════
# Install TPM: git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
# Install plugins: prefix + I (capital i)

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Plugin settings
set -g @resurrect-capture-pane-contents 'on'
set -g @continuum-restore 'on'

# Initialize TPM (keep at very bottom of config)
run '~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/tpm'

# ═══════════════════════════════════════════════════════════════════════════
# QUICK REFERENCE
# ═══════════════════════════════════════════════════════════════════════════
#
#   PREFIX KEY: Ctrl-a (instead of Ctrl-b)
#
#   PANES:
#     prefix + |     Split vertically
#     prefix + -     Split horizontally
#     prefix + h/j/k/l  Navigate panes
#     prefix + H/J/K/L  Resize panes
#     prefix + x     Kill pane
#     prefix + S     Sync panes (type in all panes)
#     Ctrl + h/j/k/l Navigate (works with vim too)
#
#   WINDOWS:
#     prefix + c     New window
#     prefix + 1-9   Switch to window
#     prefix + n/p   Next/previous window
#     prefix + X     Kill window
#
#   SESSIONS:
#     prefix + s     Session picker
#     prefix + N     New session
#     prefix + d     Detach
#
#   COPY MODE:
#     prefix + [     Enter copy mode
#     v              Start selection
#     y              Copy selection
#     prefix + p     Paste
#
#   OTHER:
#     prefix + r     Reload config
#     prefix + t     Show clock
#     prefix + ?     List all bindings
#
# ═══════════════════════════════════════════════════════════════════════════
